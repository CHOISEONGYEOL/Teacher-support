<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—˜ë‹ˆë‡¨/ë¼ë‹ˆëƒ & ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸° í•™ìŠµ ë„êµ¬</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ğŸŒŠ ê¸°í›„ ë³€í™” í•™ìŠµ ë„êµ¬</h1>
        <nav>
            <button class="nav-btn active" data-section="elnino">ì—˜ë‹ˆë‡¨ / ë¼ë‹ˆëƒ</button>
            <button class="nav-btn" data-section="milankovitch">ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸°</button>
            <button class="nav-btn" data-section="milankovitch-extreme">ë°€ë€ì½”ë¹„ì¹˜ (ê³¼ì¥)</button>
            <button class="nav-btn" data-section="quiz">OX í€´ì¦ˆ</button>
        </nav>
    </header>

    <main>
        <!-- ì—˜ë‹ˆë‡¨/ë¼ë‹ˆëƒ ì„¹ì…˜ -->
        <section id="elnino-section" class="section active">
            <div class="controls">
                <h2>í˜„ìƒ ì„ íƒ</h2>
                <div class="toggle-container">
                    <button class="toggle-btn active" data-mode="elnino">ì—˜ë‹ˆë‡¨</button>
                    <button class="toggle-btn" data-mode="normal">í‰ìƒì‹œ</button>
                    <button class="toggle-btn" data-mode="lanina">ë¼ë‹ˆëƒ</button>
                </div>
            </div>

            <div class="split-layout">
            <div class="diagram-container">
                <svg id="ocean-diagram" viewBox="0 0 900 500" preserveAspectRatio="xMidYMid meet">
                    <!-- ë°°ê²½ - í•˜ëŠ˜ -->
                    <defs>
                        <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#87CEEB"/>
                            <stop offset="100%" style="stop-color:#E0F4FF"/>
                        </linearGradient>
                        <linearGradient id="warmWater" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#FF6B6B"/>
                            <stop offset="100%" style="stop-color:#FF8E53"/>
                        </linearGradient>
                        <linearGradient id="coldWater" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#4ECDC4"/>
                            <stop offset="100%" style="stop-color:#2C7DA0"/>
                        </linearGradient>
                        <linearGradient id="thermocline" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#2C7DA0"/>
                            <stop offset="100%" style="stop-color:#1A4B6E"/>
                        </linearGradient>
                        <!-- êµ¬ë¦„ í•„í„° -->
                        <filter id="cloudShadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#00000033"/>
                        </filter>
                    </defs>

                    <!-- í•˜ëŠ˜ ë°°ê²½ -->
                    <rect x="0" y="0" width="900" height="200" fill="url(#skyGradient)"/>

                    <!-- ì§€ì—­ ë¼ë²¨ -->
                    <text x="150" y="30" class="region-label">ì„œíƒœí‰ì–‘</text>
                    <text x="750" y="30" class="region-label">ë™íƒœí‰ì–‘</text>

                    <!-- ê¸°ì•• í‘œì‹œ -->
                    <g id="pressure-west" class="pressure-indicator">
                        <text x="150" y="55" class="pressure-text" id="pressure-west-text">ì €ê¸°ì••</text>
                    </g>
                    <g id="pressure-east" class="pressure-indicator">
                        <text x="750" y="55" class="pressure-text" id="pressure-east-text">ê³ ê¸°ì••</text>
                    </g>

                    <!-- êµ¬ë¦„ê³¼ ë¹„ - ì„œíƒœí‰ì–‘ -->
                    <g id="cloud-west" class="cloud-group" filter="url(#cloudShadow)">
                        <ellipse cx="120" cy="100" rx="50" ry="30" fill="white"/>
                        <ellipse cx="160" cy="90" rx="45" ry="35" fill="white"/>
                        <ellipse cx="200" cy="100" rx="50" ry="30" fill="white"/>
                        <ellipse cx="160" cy="110" rx="55" ry="25" fill="white"/>
                    </g>
                    <g id="rain-west" class="rain-group">
                        <!-- ë¹„ ì• ë‹ˆë©”ì´ì…˜ì€ JavaScriptë¡œ ì œì–´ -->
                    </g>

                    <!-- êµ¬ë¦„ê³¼ ë¹„ - ë™íƒœí‰ì–‘ -->
                    <g id="cloud-east" class="cloud-group" filter="url(#cloudShadow)" opacity="0.3">
                        <ellipse cx="720" cy="100" rx="40" ry="25" fill="white"/>
                        <ellipse cx="750" cy="95" rx="35" ry="28" fill="white"/>
                        <ellipse cx="780" cy="100" rx="40" ry="25" fill="white"/>
                    </g>
                    <g id="rain-east" class="rain-group">
                    </g>

                    <!-- ëŒ€ê¸° ìˆœí™˜ í™”ì‚´í‘œ -->
                    <g id="atmospheric-circulation">
                        <path id="circulation-arrow" d="M 200 130 Q 450 50 700 130"
                              fill="none" stroke="#5D7B93" stroke-width="3"
                              marker-end="url(#arrowhead)"/>
                        <path id="circulation-arrow-down-east" d="M 700 130 L 700 180"
                              fill="none" stroke="#5D7B93" stroke-width="3"
                              marker-end="url(#arrowhead)"/>
                        <path id="circulation-arrow-down-west" d="M 200 180 L 200 130"
                              fill="none" stroke="#5D7B93" stroke-width="3"
                              marker-end="url(#arrowhead)"/>
                    </g>

                    <!-- í™”ì‚´í‘œ ë§ˆì»¤ ì •ì˜ -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7"
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#5D7B93"/>
                        </marker>
                        <marker id="arrowhead-white" markerWidth="10" markerHeight="7"
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
                        </marker>
                        <marker id="arrowhead-blue" markerWidth="10" markerHeight="7"
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#2C7DA0"/>
                        </marker>
                    </defs>

                    <!-- í•´ìˆ˜ë©´ -->
                    <line x1="0" y1="200" x2="900" y2="200" stroke="#1A4B6E" stroke-width="2"/>

                    <!-- ì˜¨ë‚œ ìˆ˜ì—­ (ì„œíƒœí‰ì–‘) -->
                    <path id="warm-layer-west" d="M 0 200 L 0 320 Q 225 320 450 280 L 450 200 Z"
                          fill="url(#warmWater)" opacity="0.9"/>

                    <!-- ì˜¨ë‚œ ìˆ˜ì—­ (ë™íƒœí‰ì–‘) -->
                    <path id="warm-layer-east" d="M 450 200 L 450 280 Q 675 240 900 230 L 900 200 Z"
                          fill="url(#warmWater)" opacity="0.9"/>

                    <!-- ëƒ‰ìˆ˜ì—­ / ìˆ˜ì˜¨ì•½ì¸µ -->
                    <path id="cold-layer" d="M 0 320 Q 225 320 450 280 Q 675 240 900 230 L 900 400 L 0 400 Z"
                          fill="url(#coldWater)" opacity="0.9"/>

                    <!-- ì‹¬í•´ -->
                    <rect x="0" y="400" width="900" height="100" fill="url(#thermocline)"/>

                    <!-- ìˆ˜ì˜¨ì•½ì¸µ ë¼ë²¨ -->
                    <text x="100" y="350" class="layer-label" fill="white">ìˆ˜ì˜¨ì•½ì¸µ</text>
                    <text x="780" y="260" class="layer-label" fill="white" id="thermocline-east-label">ìˆ˜ì˜¨ì•½ì¸µ</text>

                    <!-- ì˜¨ìˆ˜/ëƒ‰ìˆ˜ ë¼ë²¨ -->
                    <text x="150" y="260" class="temp-label" fill="white">ì˜¨ìˆ˜</text>
                    <text x="750" y="220" class="temp-label" fill="white" id="cold-label-east">ëƒ‰ìˆ˜</text>

                    <!-- ë¬´ì—­í’ í™”ì‚´í‘œ -->
                    <g id="trade-winds">
                        <line id="wind-arrow-1" x1="700" y1="185" x2="500" y2="185"
                              stroke="white" stroke-width="4" marker-end="url(#arrowhead-white)"/>
                        <line id="wind-arrow-2" x1="500" y1="185" x2="300" y2="185"
                              stroke="white" stroke-width="4" marker-end="url(#arrowhead-white)"/>
                        <text x="450" y="175" class="wind-label" fill="white">ë¬´ì—­í’ (ë™í’)</text>
                    </g>

                    <!-- ìš©ìŠ¹ í™”ì‚´í‘œ -->
                    <g id="upwelling">
                        <line id="upwelling-arrow" x1="800" y1="380" x2="800" y2="280"
                              stroke="#2C7DA0" stroke-width="5" marker-end="url(#arrowhead-blue)"/>
                        <text x="820" y="330" class="upwelling-label" fill="#1A4B6E">ìš©ìŠ¹</text>
                    </g>

                    <!-- í•´ë¥˜ í™”ì‚´í‘œ -->
                    <g id="ocean-current">
                        <path id="current-arrow" d="M 750 210 Q 450 210 150 210"
                              fill="none" stroke="#FFD93D" stroke-width="4" stroke-dasharray="10,5"
                              marker-end="url(#arrowhead-yellow)"/>
                    </g>
                    <defs>
                        <marker id="arrowhead-yellow" markerWidth="10" markerHeight="7"
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#FFD93D"/>
                        </marker>
                    </defs>

                    <!-- ëŒ€ë¥™ (ê°„ë‹¨í•œ í‘œí˜„) -->
                    <polygon points="0,200 30,180 50,190 30,200" fill="#8B7355"/>
                    <polygon points="870,180 900,200 900,160 880,170" fill="#8B7355"/>

                    <!-- ë²”ë¡€ -->
                    <g id="legend" transform="translate(20, 420)">
                        <rect x="0" y="0" width="200" height="70" fill="white" opacity="0.9" rx="5"/>
                        <rect x="10" y="10" width="20" height="15" fill="url(#warmWater)"/>
                        <text x="35" y="22" class="legend-text">ì˜¨ë‚œ ìˆ˜ì—­ (ì˜¨ìˆ˜)</text>
                        <rect x="10" y="35" width="20" height="15" fill="url(#coldWater)"/>
                        <text x="35" y="47" class="legend-text">ëƒ‰ìˆ˜ì—­</text>
                    </g>
                </svg>
            </div>

            <div class="info-panel">
                <h3 id="phenomenon-title">í‰ìƒì‹œ</h3>
                <div id="phenomenon-description">
                    <p>ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì—˜ë‹ˆë‡¨, ë¼ë‹ˆëƒ, í‰ìƒì‹œ ìƒíƒœë¥¼ ë¹„êµí•´ë³´ì„¸ìš”.</p>
                </div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>êµ¬ë¶„</th>
                                <th>ì„œíƒœí‰ì–‘</th>
                                <th>ë™íƒœí‰ì–‘</th>
                            </tr>
                        </thead>
                        <tbody id="comparison-tbody">
                            <tr>
                                <td>í•´ìˆ˜ë©´ ì˜¨ë„</td>
                                <td id="sst-west">-</td>
                                <td id="sst-east">-</td>
                            </tr>
                            <tr>
                                <td>ê¸°ì••</td>
                                <td id="pressure-west-cell">-</td>
                                <td id="pressure-east-cell">-</td>
                            </tr>
                            <tr>
                                <td>ê°•ìˆ˜ëŸ‰</td>
                                <td id="rain-west-cell">-</td>
                                <td id="rain-east-cell">-</td>
                            </tr>
                            <tr>
                                <td>ì˜¨ë‚œ ìˆ˜ì—­ ë‘ê»˜</td>
                                <td id="warm-west-cell">-</td>
                                <td id="warm-east-cell">-</td>
                            </tr>
                            <tr>
                                <td>ìˆ˜ì˜¨ì•½ì¸µ ê¹Šì´</td>
                                <td id="thermo-west-cell">-</td>
                                <td id="thermo-east-cell">-</td>
                            </tr>
                            <tr>
                                <td>ìš©ìŠ¹</td>
                                <td>-</td>
                                <td id="upwelling-cell">-</td>
                            </tr>
                            <tr>
                                <td>ë¬´ì—­í’</td>
                                <td colspan="2" id="wind-cell">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
        </section>

        <!-- ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸° ì„¹ì…˜ -->
        <section id="milankovitch-section" class="section">
            <div class="milankovitch-controls">
                <div class="control-group">
                    <label>ì„¸ì°¨ìš´ë™ (ì£¼ê¸°: ì•½ 26,000ë…„)</label>
                    <input type="range" id="precession-slider" min="0" max="26000" value="0" step="500">
                    <span id="precession-value">í˜„ì¬ (ì„œê¸° 2000ë…„)</span>
                </div>
                <div class="control-group">
                    <label>ìì „ì¶• ê¸°ìš¸ê¸° (ì£¼ê¸°: ì•½ 41,000ë…„)</label>
                    <input type="range" id="obliquity-slider" min="22.1" max="24.5" value="23.5" step="0.1">
                    <span id="obliquity-value">23.5Â° (í˜„ì¬)</span>
                </div>
                <div class="control-group">
                    <label>ì´ì‹¬ë¥  (ì£¼ê¸°: ì•½ 100,000ë…„)</label>
                    <input type="range" id="eccentricity-slider" min="0" max="0.06" value="0.017" step="0.001">
                    <span id="eccentricity-value">0.017 (í˜„ì¬)</span>
                </div>
            </div>

            <div class="split-layout">
                <!-- ì™¼ìª½: 3D ì„¸ì°¨ìš´ë™ ì‹œë®¬ë ˆì´ì…˜ -->
                <div class="precession-3d-container">
                    <div class="precession-container">
                        <div id="precession-ui">
                            <div class="precession-info-text">
                                <p>ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ ì‹œì  ì´ë™ | ë¹¨ê°„ ì  = ë¶ê·¹</p>
                            </div>
                        </div>
                        <div id="precession-canvas"></div>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì •ë³´ íŒ¨ë„ -->
                <div class="milankovitch-info">
                    <div class="status-box">
                        <p id="info-hemisphere">ë¶ë°˜êµ¬: ì—¬ë¦„ | ë‚¨ë°˜êµ¬: ê²¨ìš¸</p>
                        <p id="info-distance">ê±°ë¦¬: ì›ì¼ì  (ìµœëŒ€)</p>
                        <p id="info-tilt">ìì „ì¶• ê¸°ìš¸ê¸°: 23.5Â°</p>
                        <p id="info-eccentricity">ì´ì‹¬ë¥ : 0.017</p>
                    </div>
                    <div class="temp-box">
                        <p class="temp-summer" id="temp-summer">ë¶ë°˜êµ¬ ì—¬ë¦„: ê¸°ì¤€</p>
                        <p class="temp-winter" id="temp-winter">ë¶ë°˜êµ¬ ê²¨ìš¸: ê¸°ì¤€</p>
                        <p class="temp-range" id="temp-range">ì—°êµì°¨: ê¸°ì¤€</p>
                        <p id="temp-south">ë‚¨ë°˜êµ¬: ë°˜ëŒ€ íš¨ê³¼</p>
                    </div>
                    <div class="cycle-explanation">
                        <div class="cycle-item" id="precession-info">
                            <h4>ì„¸ì°¨ìš´ë™ (~26,000ë…„)</h4>
                            <p>ìì „ì¶•ì´ íŒ½ì´ì²˜ëŸ¼ íšŒì „. ê·¼ì¼ì /ì›ì¼ì  ì‹œ ê³„ì ˆ ë³€í™”</p>
                        </div>
                        <div class="cycle-item" id="obliquity-info">
                            <h4>ìì „ì¶• ê¸°ìš¸ê¸° (~41,000ë…„)</h4>
                            <p>22.1Â°~24.5Â° ë³€í™”. ê¸°ìš¸ê¸° ì¦ê°€ì‹œ ê³„ì ˆì°¨ ì¦ê°€</p>
                        </div>
                        <div class="cycle-item" id="eccentricity-info">
                            <h4>ì´ì‹¬ë¥  (~100,000ë…„)</h4>
                            <p>0~0.06 ë³€í™”. ì´ì‹¬ë¥  ì¦ê°€ì‹œ ê·¼ì¼ì /ì›ì¼ì  ê±°ë¦¬ì°¨ ì¦ê°€</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸° (ê³¼ì¥ëœ ë²„ì „) ì„¹ì…˜ -->
        <section id="milankovitch-extreme-section" class="section">
            <div class="extreme-warning">
                âš ï¸ êµìœ¡ìš© ê³¼ì¥ëœ ë²„ì „: ì‹¤ì œ ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸°ë³´ë‹¤ í›¨ì”¬ ê·¹ë‹¨ì ì¸ ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤
            </div>
            <div class="milankovitch-controls">
                <div class="control-group">
                    <label>ì„¸ì°¨ìš´ë™ (ì£¼ê¸°: ì•½ 26,000ë…„)</label>
                    <input type="range" id="precession-slider-ex" min="0" max="26000" value="0" step="500">
                    <span id="precession-value-ex">í˜„ì¬ (ì„œê¸° 2000ë…„)</span>
                </div>
                <div class="control-group extreme-control">
                    <label>ìì „ì¶• ê¸°ìš¸ê¸° (ê³¼ì¥: 0Â°~90Â°)</label>
                    <input type="range" id="obliquity-slider-ex" min="0" max="90" value="23.5" step="1">
                    <span id="obliquity-value-ex">23.5Â° (í˜„ì¬)</span>
                </div>
                <div class="control-group extreme-control">
                    <label>ì´ì‹¬ë¥  (ê³¼ì¥: 0~0.9)</label>
                    <input type="range" id="eccentricity-slider-ex" min="0" max="0.9" value="0.017" step="0.01">
                    <span id="eccentricity-value-ex">0.017 (í˜„ì¬)</span>
                </div>
            </div>

            <div class="split-layout">
                <!-- ì™¼ìª½: 3D ì„¸ì°¨ìš´ë™ ì‹œë®¬ë ˆì´ì…˜ (ê³¼ì¥) -->
                <div class="precession-3d-container">
                    <div class="precession-container" id="precession-container-ex">
                        <div id="precession-ui-ex">
                            <div class="precession-info-text">
                                <p>ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ ì‹œì  ì´ë™ | ë¹¨ê°„ ì  = ë¶ê·¹</p>
                            </div>
                        </div>
                        <div id="precession-canvas-ex"></div>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì •ë³´ íŒ¨ë„ -->
                <div class="milankovitch-info">
                    <div class="status-box">
                        <p id="info-hemisphere-ex">ë¶ë°˜êµ¬: ì—¬ë¦„ | ë‚¨ë°˜êµ¬: ê²¨ìš¸</p>
                        <p id="info-distance-ex">ê±°ë¦¬: ì›ì¼ì  (ìµœëŒ€)</p>
                        <p id="info-tilt-ex">ìì „ì¶• ê¸°ìš¸ê¸°: 23.5Â°</p>
                        <p id="info-eccentricity-ex">ì´ì‹¬ë¥ : 0.017</p>
                    </div>
                    <div class="temp-box">
                        <p class="temp-summer" id="temp-summer-ex">ë¶ë°˜êµ¬ ì—¬ë¦„: ê¸°ì¤€</p>
                        <p class="temp-winter" id="temp-winter-ex">ë¶ë°˜êµ¬ ê²¨ìš¸: ê¸°ì¤€</p>
                        <p class="temp-range" id="temp-range-ex">ì—°êµì°¨: ê¸°ì¤€</p>
                        <p id="temp-south-ex">ë‚¨ë°˜êµ¬: ë°˜ëŒ€ íš¨ê³¼</p>
                    </div>
                    <div class="cycle-explanation">
                        <div class="cycle-item">
                            <h4>ìì „ì¶• ê¸°ìš¸ê¸° ê·¹ë‹¨ê°’</h4>
                            <p>0Â° = ê³„ì ˆ ì—†ìŒ (ì ë„ì™€ ê·¹ì§€ë°© ì˜¨ë„ì°¨ë§Œ ì¡´ì¬)<br>
                               90Â° = ê·¹ë‹¨ì  ê³„ì ˆ (í•œìª½ ë°˜êµ¬ê°€ ì™„ì „íˆ íƒœì–‘ì„ í–¥í•¨)</p>
                        </div>
                        <div class="cycle-item">
                            <h4>ì´ì‹¬ë¥  ê·¹ë‹¨ê°’</h4>
                            <p>0 = ì™„ì „í•œ ì› (ê·¼ì¼ì /ì›ì¼ì  ê±°ë¦¬ ë™ì¼)<br>
                               0.9 = ê·¹ë‹¨ì  íƒ€ì› (ê·¼ì¼ì ì´ íƒœì–‘ì— ë§¤ìš° ê°€ê¹Œì›€)</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- í€´ì¦ˆ ì„¹ì…˜ -->
        <section id="quiz-section" class="section">
            <div class="quiz-container">
                <!-- í€´ì¦ˆ ì„¤ì • í™”ë©´ -->
                <div id="quiz-setup" class="quiz-setup">
                    <h2>OX í€´ì¦ˆ</h2>
                    <div class="setup-form">
                        <div class="setup-group">
                            <label>ì¹´í…Œê³ ë¦¬</label>
                            <select id="quiz-category">
                                <option value="all">ì „ì²´</option>
                                <option value="elnino">ì—˜ë‹ˆë‡¨/ë¼ë‹ˆëƒ</option>
                                <option value="milankovitch">ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸°</option>
                            </select>
                        </div>
                        <div class="setup-group">
                            <label>ë¬¸í•­ ìˆ˜</label>
                            <div class="question-count-options">
                                <button class="count-btn" data-count="5">5ë¬¸ì œ</button>
                                <button class="count-btn active" data-count="10">10ë¬¸ì œ</button>
                                <button class="count-btn" data-count="15">15ë¬¸ì œ</button>
                                <button class="count-btn" data-count="20">20ë¬¸ì œ</button>
                            </div>
                        </div>
                        <div class="setup-group">
                            <label>ì‹œê°„ ì œí•œ</label>
                            <div class="time-limit-options">
                                <button class="time-btn active" data-time="0">ì—†ìŒ</button>
                                <button class="time-btn" data-time="5">5ì´ˆ</button>
                                <button class="time-btn" data-time="10">10ì´ˆ</button>
                            </div>
                        </div>
                        <button id="start-quiz-btn" class="btn start-btn">í€´ì¦ˆ ì‹œì‘</button>
                    </div>
                </div>

                <!-- í€´ì¦ˆ ì§„í–‰ í™”ë©´ -->
                <div id="quiz-play" class="quiz-play" style="display: none;">
                    <div class="quiz-header">
                        <h2>OX í€´ì¦ˆ</h2>
                        <div class="quiz-progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="quiz-progress">
                            <span id="quiz-score">ì ìˆ˜: 0 / 0</span>
                            <span id="quiz-streak">ì—°ì† ì •ë‹µ: 0</span>
                        </div>
                    </div>

                    <div class="quiz-card">
                        <div class="question-header">
                            <div class="question-number" id="question-number">ë¬¸ì œ 1</div>
                            <div class="timer-display" id="timer-display" style="display: none;">
                                <div class="timer-bar" id="timer-bar"></div>
                                <span class="timer-text" id="timer-text">10</span>
                            </div>
                        </div>
                        <div class="question-text" id="question-text">
                            í€´ì¦ˆë¥¼ ì‹œì‘í•˜ë ¤ë©´ "ìƒˆ ë¬¸ì œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                        </div>
                        <div class="answer-buttons">
                            <button class="answer-btn" id="btn-o" disabled>O</button>
                            <button class="answer-btn" id="btn-x" disabled>X</button>
                        </div>
                        <div class="feedback" id="feedback"></div>
                        <div class="explanation" id="explanation"></div>
                    </div>

                    <button id="next-quiz-btn" class="btn next-btn" style="display: none;">ë‹¤ìŒ ë¬¸ì œ</button>
                </div>

                <!-- ê²°ê³¼ í™”ë©´ -->
                <div id="quiz-result" class="quiz-result" style="display: none;">
                    <h2>í€´ì¦ˆ ê²°ê³¼</h2>
                    <div class="result-score-container">
                        <div class="result-score" id="result-score">0</div>
                        <div class="result-score-label">ì </div>
                    </div>
                    <div class="result-details">
                        <div class="result-item">
                            <span class="result-label">ì •ë‹µ</span>
                            <span class="result-value" id="result-correct">0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ì˜¤ë‹µ</span>
                            <span class="result-value" id="result-incorrect">0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ì´ ë¬¸í•­</span>
                            <span class="result-value" id="result-total">0</span>
                        </div>
                    </div>
                    <div class="result-message" id="result-message"></div>
                    <div class="result-buttons">
                        <button id="retry-quiz-btn" class="btn">ë‹¤ì‹œ í’€ê¸°</button>
                        <button id="new-quiz-setup-btn" class="btn">ìƒˆ í€´ì¦ˆ</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>ğŸŒ ê¸°í›„ ë³€í™” í•™ìŠµ ë„êµ¬ - ì—˜ë‹ˆë‡¨/ë¼ë‹ˆëƒ & ë°€ë€ì½”ë¹„ì¹˜ ì£¼ê¸°</p>
    </footer>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script src="data.js"></script>
    <script src="elnino.js"></script>
    <script src="milankovitch.js"></script>
    <script src="milankovitch-extreme.js"></script>
    <script src="quiz.js"></script>
    <script src="app.js"></script>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        let precessionScene, precessionCamera, precessionRenderer, precessionControls;
        let earthSystems = [];
        let currentPrecessionYear = 0;
        let currentObliquity = 23.5;
        let currentEccentricity = 0.017;
        let precessionInitialized = false;
        let orbitCurve;
        let orbitLine;

        window.initPrecession = function() {
            if (precessionInitialized) return;

            const container = document.getElementById('precession-canvas');
            if (!container) return;

            // Scene ì„¤ì •
            precessionScene = new THREE.Scene();

            // Camera ì„¤ì •
            precessionCamera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 1, 5000);
            precessionCamera.position.set(0, 180, 300);

            // Renderer ì„¤ì •
            precessionRenderer = new THREE.WebGLRenderer({ antialias: true });
            precessionRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(precessionRenderer.domElement);

            // OrbitControls ì„¤ì •
            precessionControls = new OrbitControls(precessionCamera, precessionRenderer.domElement);
            precessionControls.enableDamping = true;
            precessionControls.screenSpacePanning = true;

            // ë°°ê²½ ë³„ë¹›
            const starCoords = [];
            for (let i = 0; i < 6000; i++) {
                starCoords.push(
                    THREE.MathUtils.randFloatSpread(2000),
                    THREE.MathUtils.randFloatSpread(2000),
                    THREE.MathUtils.randFloatSpread(2000)
                );
            }
            const starGeo = new THREE.BufferGeometry();
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starCoords, 3));
            precessionScene.add(new THREE.Points(starGeo, new THREE.PointsMaterial({ color: 0xffffff, size: 0.8 })));

            // íƒœì–‘
            const sun = new THREE.Mesh(
                new THREE.SphereGeometry(15, 32, 32),
                new THREE.MeshBasicMaterial({ color: 0xffcc00 })
            );
            precessionScene.add(sun);

            const sunLight = new THREE.PointLight(0xffffff, 15000, 1500);
            precessionScene.add(sunLight);
            precessionScene.add(new THREE.AmbientLight(0x222222));

            // ê³µì „ ê¶¤ë„ (ë™ì ìœ¼ë¡œ ë³€ê²½ë¨)
            orbitLine = new THREE.Line(
                new THREE.BufferGeometry(),
                new THREE.LineBasicMaterial({ color: 0x444444 })
            );
            precessionScene.add(orbitLine);

            // ì§€êµ¬ ì‹œìŠ¤í…œ
            const TILT = 23.5 * (Math.PI / 180);
            const orbitPositions = [0.5, 0.75, 0, 0.25]; // 0.5ê°€ ì™¼ìª½(ê·¼ì¼ì )

            orbitPositions.forEach(t => {
                const root = new THREE.Group();
                const pivot = new THREE.Group();

                const earth = new THREE.Mesh(
                    new THREE.SphereGeometry(13, 64, 64),
                    new THREE.MeshStandardMaterial({ color: 0x1188ff, roughness: 0.8 })
                );

                const axis = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.3, 0.3, 50, 8),
                    new THREE.MeshBasicMaterial({ color: 0xffffff })
                );
                const pole = new THREE.Mesh(
                    new THREE.SphereGeometry(2, 16, 16),
                    new THREE.MeshBasicMaterial({ color: 0xff0000 })
                );
                pole.position.y = 25;
                axis.add(pole);

                pivot.add(earth);
                pivot.add(axis);
                root.add(pivot);

                precessionScene.add(root);
                earthSystems.push({ root, pivot, earth, t, baseTilt: TILT });
            });

            // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
            function animate() {
                requestAnimationFrame(animate);
                earthSystems.forEach(s => s.earth.rotation.y += 0.01);
                precessionControls.update();
                precessionRenderer.render(precessionScene, precessionCamera);
            }

            updateOrbit();
            updatePrecession3D();
            animate();

            // ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ëŸ¬
            const resizeHandler = () => {
                if (!container || !precessionCamera || !precessionRenderer) return;
                precessionCamera.aspect = container.clientWidth / container.clientHeight;
                precessionCamera.updateProjectionMatrix();
                precessionRenderer.setSize(container.clientWidth, container.clientHeight);
            };
            window.addEventListener('resize', resizeHandler);

            precessionInitialized = true;
        };

        function updateOrbit() {
            // ì´ì‹¬ë¥ ì— ë”°ë¼ ê¶¤ë„ í˜•íƒœ ë³€ê²½
            const e = currentEccentricity;
            const a = 120; // ì¥ë°˜ê²½
            const b = a * Math.sqrt(1 - e * e); // ë‹¨ë°˜ê²½
            const c = a * e; // ì´ˆì  ê±°ë¦¬ (íƒœì–‘ì´ ì´ˆì ì— ìœ„ì¹˜)

            orbitCurve = new THREE.EllipseCurve(c, 0, a, b, 0, 2 * Math.PI, false);
            const points = orbitCurve.getPoints(100).map(p => new THREE.Vector3(p.x, 0, p.y));
            orbitLine.geometry.dispose();
            orbitLine.geometry = new THREE.BufferGeometry().setFromPoints(points);

            // ì§€êµ¬ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            earthSystems.forEach(sys => {
                const pos = orbitCurve.getPoint(sys.t);
                sys.root.position.set(pos.x, 0, pos.y);
            });
        }

        function updatePrecession3D() {
            // ì„¸ì°¨ìš´ë™ ê°ë„ (26000ë…„ ì£¼ê¸°)
            const precessionAngle = (currentPrecessionYear / 26000) * Math.PI * 2;
            // í˜„ì¬ ê¸°ìš¸ê¸°ë¥¼ ë¼ë””ì•ˆìœ¼ë¡œ
            const tiltRad = currentObliquity * (Math.PI / 180);

            earthSystems.forEach((sys) => {
                sys.pivot.rotation.set(0, 0, 0);
                sys.pivot.rotation.y = -precessionAngle;
                sys.pivot.rotation.z = tiltRad;
            });
        }

        // ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤
        window.updatePrecessionFromSlider = function(yearValue, obliquityValue, eccentricityValue) {
            currentPrecessionYear = yearValue;
            currentObliquity = obliquityValue;
            currentEccentricity = eccentricityValue;
            if (precessionInitialized) {
                updateOrbit();
                updatePrecession3D();
            }
        };

        window.resetPrecession3D = function() {
            if (precessionCamera && precessionControls) {
                precessionCamera.position.set(0, 180, 300);
                precessionControls.target.set(0, 0, 0);
            }
        };

        // ==================== ê³¼ì¥ëœ ë²„ì „ ====================
        let exScene, exCamera, exRenderer, exControls;
        let exEarthSystems = [];
        let exOrbitLine;
        let exCurrentYear = 0;
        let exCurrentObliquity = 23.5;
        let exCurrentEccentricity = 0.017;
        let exInitialized = false;

        window.initPrecessionExtreme = function() {
            if (exInitialized) return;

            const container = document.getElementById('precession-canvas-ex');
            if (!container) return;

            // Scene
            exScene = new THREE.Scene();

            // Camera
            exCamera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 1, 5000);
            exCamera.position.set(0, 180, 300);

            // Renderer
            exRenderer = new THREE.WebGLRenderer({ antialias: true });
            exRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(exRenderer.domElement);

            // Controls
            exControls = new OrbitControls(exCamera, exRenderer.domElement);
            exControls.enableDamping = true;
            exControls.screenSpacePanning = true;

            // ë³„
            const starCoords = [];
            for (let i = 0; i < 6000; i++) {
                starCoords.push(
                    THREE.MathUtils.randFloatSpread(2000),
                    THREE.MathUtils.randFloatSpread(2000),
                    THREE.MathUtils.randFloatSpread(2000)
                );
            }
            const starGeo = new THREE.BufferGeometry();
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starCoords, 3));
            exScene.add(new THREE.Points(starGeo, new THREE.PointsMaterial({ color: 0xffffff, size: 0.8 })));

            // íƒœì–‘
            const sun = new THREE.Mesh(
                new THREE.SphereGeometry(15, 32, 32),
                new THREE.MeshBasicMaterial({ color: 0xffcc00 })
            );
            exScene.add(sun);

            const sunLight = new THREE.PointLight(0xffffff, 15000, 1500);
            exScene.add(sunLight);
            exScene.add(new THREE.AmbientLight(0x222222));

            // ê¶¤ë„ (ë™ì ìœ¼ë¡œ ë³€ê²½ë¨)
            exOrbitLine = new THREE.Line(
                new THREE.BufferGeometry(),
                new THREE.LineBasicMaterial({ color: 0x444444 })
            );
            exScene.add(exOrbitLine);

            // ì§€êµ¬ ì‹œìŠ¤í…œ 4ê°œ
            const orbitPositions = [0.5, 0.75, 0, 0.25];
            orbitPositions.forEach((t, idx) => {
                const root = new THREE.Group();
                const pivot = new THREE.Group();

                const earth = new THREE.Mesh(
                    new THREE.SphereGeometry(13, 64, 64),
                    new THREE.MeshStandardMaterial({ color: 0x1188ff, roughness: 0.8 })
                );

                const axis = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.3, 0.3, 50, 8),
                    new THREE.MeshBasicMaterial({ color: 0xffffff })
                );
                const pole = new THREE.Mesh(
                    new THREE.SphereGeometry(2, 16, 16),
                    new THREE.MeshBasicMaterial({ color: 0xff0000 })
                );
                pole.position.y = 25;
                axis.add(pole);

                pivot.add(earth);
                pivot.add(axis);
                root.add(pivot);
                exScene.add(root);

                exEarthSystems.push({ root, pivot, earth, t });
            });

            // ì• ë‹ˆë©”ì´ì…˜
            function animate() {
                requestAnimationFrame(animate);
                exEarthSystems.forEach(s => s.earth.rotation.y += 0.01);
                exControls.update();
                exRenderer.render(exScene, exCamera);
            }

            updateExtremeOrbit();
            updateExtremePrecession();
            animate();

            // ë¦¬ì‚¬ì´ì¦ˆ
            window.addEventListener('resize', () => {
                if (!container || !exCamera || !exRenderer) return;
                exCamera.aspect = container.clientWidth / container.clientHeight;
                exCamera.updateProjectionMatrix();
                exRenderer.setSize(container.clientWidth, container.clientHeight);
            });

            exInitialized = true;
        };

        function updateExtremeOrbit() {
            // ì´ì‹¬ë¥ ì— ë”°ë¼ ê¶¤ë„ í˜•íƒœ ë³€ê²½
            const e = exCurrentEccentricity;
            const a = 120; // ì¥ë°˜ê²½
            const b = a * Math.sqrt(1 - e * e); // ë‹¨ë°˜ê²½
            const c = a * e; // ì´ˆì  ê±°ë¦¬

            const curve = new THREE.EllipseCurve(c, 0, a, b, 0, 2 * Math.PI, false);
            const points = curve.getPoints(100).map(p => new THREE.Vector3(p.x, 0, p.y));
            exOrbitLine.geometry.dispose();
            exOrbitLine.geometry = new THREE.BufferGeometry().setFromPoints(points);

            // ì§€êµ¬ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            exEarthSystems.forEach(sys => {
                const pos = curve.getPoint(sys.t);
                sys.root.position.set(pos.x, 0, pos.y);
            });
        }

        function updateExtremePrecession() {
            const precessionAngle = (exCurrentYear / 26000) * Math.PI * 2;
            const tiltRad = exCurrentObliquity * (Math.PI / 180);

            exEarthSystems.forEach(sys => {
                sys.pivot.rotation.set(0, 0, 0);
                sys.pivot.rotation.y = -precessionAngle;
                sys.pivot.rotation.z = tiltRad;
            });
        }

        window.updateExtremeFromSlider = function(yearValue, obliquityValue, eccentricityValue) {
            exCurrentYear = yearValue;
            exCurrentObliquity = obliquityValue;
            exCurrentEccentricity = eccentricityValue;
            if (exInitialized) {
                updateExtremeOrbit();
                updateExtremePrecession();
            }
        };
    </script>
</body>
</html>
